!function(i){var t=function(t,s){this.lightbox=i(t),this.config=i.extend({keepFocusInside:!0,customGlobalClasses:{}},s||{}),this.classes=i.extend({active:"is-active",open:"is-open",hover:"is-hover",clicked:"is-clicked",extern:"is-external",error:"is-error",visuallyhidden:"is-visuallyhidden",next:"is-next",prev:"is-prev"},(void 0!==window.classes?window.classes:this.config.customGlobalClasses)||{}),this.lightboxIdentifier=this.lightbox.attr("data-lightbox-id"),this.lightboxOpenTriggers=i('button[data-open-lightbox="'+this.lightboxIdentifier+'"]'),this.lightboxCloseTriggers=i('button[data-close-lightbox="'+this.lightboxIdentifier+'"]'),this.clickedLightboxTrigger="",this.init()};i.extend(t.prototype,{init:function(){this.lightbox.append('<div class="lightbox-shadow '+this.classes.active+'"></div>'),this.lightboxShadow=this.lightbox.find(".lightbox-shadow"),this.bindEvents()},bindEvents:function(){this.lightboxOpenTriggers.on("click",i.proxy(function(t){this.openLightbox(i(t.currentTarget))},this)),this.lightboxCloseTriggers.on("click",i.proxy(function(i){this.closeLightbox()},this)),this.lightboxShadow.on("click",i.proxy(function(i){this.closeLightbox()},this)),i(document).keyup(i.proxy(function(i){27===i.keyCode&&this.closeLightbox()},this))},openLightbox:function(t){this.createGuards(),this.lightbox.attr("tabindex",-1),setTimeout(i.proxy(function(){this.lightbox.focus()},this),0),""===this.clickedLightboxTrigger&&(this.clickedLightboxTrigger=t),t.addClass(this.classes.active),this.lightbox.addClass(this.classes.active)},closeLightbox:function(){this.lightbox.removeClass(this.classes.active),this.lightboxOpenTriggers.removeClass(this.classes.active),this.removeGuards(),this.clickedLightboxTrigger.focus()},createGuards:function(){this.lightbox.before('<button class="lightbox-guard '+this.classes.visuallyhidden+" "+this.classes.prev+'"></button>'),this.lightbox.after('<button class="lightbox-guard '+this.classes.visuallyhidden+" "+this.classes.next+'"></button>'),this.lightboxGuards=i(".lightbox-guard"),this.lightboxGuards.on("focus",i.proxy(function(i){this.onGuardFocus(i)},this))},onGuardFocus:function(t){var s=i(t.currentTarget);this.config.keepFocusInside?s.hasClass(this.classes.prev)?this.lightbox.find(":focusable").last().focus():this.lightbox.find(":focusable").first().focus():this.closeLightbox()},removeGuards:function(){this.lightboxGuards.remove()}}),i.fn.lightbox=function(s){return this.each(function(){var o=i(this);if(!o.data("lightbox")){var e=new t(this,s);o.data("lightbox",e)}})}}(jQuery);