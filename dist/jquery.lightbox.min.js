!function(i){var t=function(t,s){this.lightbox=i(t),this.lightboxIdentifier=this.lightbox.attr("data-identifier"),this.lightboxTriggers=i('button[data-identifier="'+this.lightboxIdentifier+'"]'),this.clickedLighboxTrigger="",this.config=i.extend({customGlobalClasses:{}},s||{}),this.classes=i.extend({active:"is-active",open:"is-open",hover:"is-hover",clicked:"is-clicked",extern:"is-external",error:"is-error"},(void 0!==window.classes?window.classes:this.config.customGlobalClasses)||{}),this.init()};i.extend(t.prototype,{init:function(){this.lightbox.append('<div class="lightbox-shadow '+this.classes.active+'"></div>'),this.lightboxShadow=this.lightbox.find(".lightbox-shadow"),this.bindEvents()},bindEvents:function(){this.lightboxTriggers.on("click",i.proxy(function(t){this.lightbox.hasClass(this.classes.active)?this.closeLightbox(i(t.currentTarget)):this.openLightbox(i(t.currentTarget))},this)),this.lightboxShadow.on("click",i.proxy(function(t){this.closeLightbox(i(t.currentTarget))},this))},openLightbox:function(t){this.createGuards(),this.lightbox.attr("tabindex",-1),setTimeout(i.proxy(function(){this.lightbox.focus(),console.log(document.activeElement)},this),0),""==this.clickedLighboxTrigger&&(this.clickedLighboxTrigger=t),t.addClass(this.classes.active),this.lightbox.addClass(this.classes.active)},closeLightbox:function(i){this.lightbox.removeClass(this.classes.active),this.lightboxTriggers.removeClass(this.classes.active),this.removeGuards()},createGuards:function(){this.lightbox.before('<button class="lightbox-guard visuallyhidden is-prev"></button>'),this.lightbox.after('<button class="lightbox-guard visuallyhidden is-next"></button>'),this.lightboxGuards=i(".lightbox-guard"),this.lightboxGuards.on("focus",i.proxy(function(t){this.closeLightbox(i(t.currentTarget)),this.clickedLighboxTrigger.focus()},this))},removeGuards:function(){this.lightboxGuards.remove()}}),i.fn.lightbox=function(s){return this.each(function(){var e=i(this);if(!e.data("lightbox")){var o=new t(this,s);e.data("lightbox",o)}})}}(jQuery);